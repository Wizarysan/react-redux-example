"use strict";function createDate(){var e=new Date;return e.toLocaleString()}function checkFields(){}var RecordReducer=function(e,t){switch(t.type){case"ADD_RECORD":return{id:t.id,title:t.title,text:t.text,date:t.date,isDeleted:!1,isEditing:!1};case"CHANGE_RECORD":return{id:t.id,title:t.title,text:t.text,date:t.date,isEditing:!1};case"DELETE_RECORD":return e.id!=t.id?e:Object.assign({},e,{isDeleted:!e.isDeleted});case"EDIT_RECORD":return e.id!=t.id?e:Object.assign({},e,{isEditing:!e.isEditing});default:return e}},RecordsReducer=function(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0],t=arguments[1];switch(t.type){case"ADD_RECORD":var r=[];return r.concat(RecordReducer(void 0,t),e);case"CHANGE_RECORD":var r=e.slice();return r.reverse(),r=r.slice(0,t.id).concat(RecordReducer(void 0,t),r.slice(t.id+1)),r.reverse();case"DELETE_RECORD":case"EDIT_RECORD":return e.map(function(e){return RecordReducer(e,t)});default:return e}},visibilityFilter=function(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0],t=arguments[1];switch(t.type){case"SET_FILTER":return t.filter;default:return e}},_Redux=Redux,combineReducers=_Redux.combineReducers,AppReducer=combineReducers({RecordsReducer:RecordsReducer,visibilityFilter:visibilityFilter}),nextRecordId=0,Records=React.createClass({displayName:"Records",render:function(){return React.createElement("div",{className:"records"},React.createElement(AddRecord,{records:this.props.records}),React.createElement(SearchField,null),React.createElement(ShowRecords,{records:this.props.records,filter:this.props.filter}))}}),AddRecord=React.createClass({displayName:"AddRecord",render:function(){var e=this;return React.createElement("div",{className:"addrecord"},React.createElement("input",{className:"addrecord__title",placeholder:"Title",ref:function(t){e.title=t}}),React.createElement("textarea",{rows:"5",className:"addrecord__text",placeholder:"Comment text",ref:function(t){e.text=t}}),React.createElement("button",{className:"addrecord__submit-button",onClick:function(){var t=createDate();store.dispatch({type:"ADD_RECORD",id:nextRecordId++,title:e.title.value,text:e.text.value,date:t,isDeleted:!1,isEditing:!1}),e.title.value="",e.text.value=""}},"Add Record"))}}),ShowRecords=React.createClass({displayName:"ShowRecords",render:function(){for(var e=[],t=0,r=this.props.records.length;t<r;t++)!this.props.records[t].isDeleted&&(""==this.props.filter||this.props.records[t].title.indexOf(this.props.filter)>=0||this.props.records[t].text.indexOf(this.props.filter)>=0)&&e.push(this.props.records[t]);return React.createElement("div",{className:"allrecords"},e.map(function(e){return e.isEditing?React.createElement(EditRecord,{key:e.id,id:e.id,title:e.title,text:e.text}):React.createElement(SingleRecord,{key:e.id,id:e.id,title:e.title,date:e.date,text:e.text})}))}}),SingleRecord=React.createClass({displayName:"SingleRecord",render:function(){var e=this;return React.createElement("div",{className:"record"},React.createElement("h4",{className:"record__title"},this.props.title),React.createElement("span",{className:"record__date"},this.props.date),React.createElement("div",{className:"record__text"},this.props.text),React.createElement("button",{className:"record__edit",onClick:function(){store.dispatch({type:"EDIT_RECORD",id:e.props.id})}}),React.createElement("button",{className:"record__delete",onClick:function(){store.dispatch({type:"DELETE_RECORD",id:e.props.id})}}))}}),EditRecord=React.createClass({displayName:"EditRecord",getInitialState:function(){return{titleField:this.props.title,textField:this.props.text}},handleChange:function(){this.setState({titleField:this.title.value,textField:this.text.value})},render:function(){var e=this;return React.createElement("div",{className:"record-editor"},React.createElement("input",{className:"record-editor__title",value:this.state.titleField,onChange:this.handleChange,ref:function(t){e.title=t}}),React.createElement("textarea",{className:"record-editor__text",rows:"5",value:this.state.textField,onChange:this.handleChange,ref:function(t){e.text=t}}),React.createElement("button",{className:"record-editor__submit-button",onClick:function(){store.dispatch({type:"CHANGE_RECORD",id:e.props.id,title:e.title.value,text:e.text.value,date:createDate()}),e.title.value="",e.text.value=""}},"Save Record"))}}),SearchField=React.createClass({displayName:"SearchField",getInitialState:function(){return{searchString:""}},handleChange:function(e){this.setState({searchString:e.target.value}),store.dispatch({type:"SET_FILTER",filter:e.target.value})},render:function(){this.state.searchString.trim().toLowerCase();return React.createElement("div",{className:"search-field"},React.createElement("input",{type:"text",className:"search-field__input",value:this.state.searchString,onChange:this.handleChange,placeholder:"Search..."}))}}),_Redux2=Redux,createStore=_Redux2.createStore,store=createStore(AppReducer),render=function(){ReactDOM.render(React.createElement(Records,{records:store.getState().RecordsReducer,filter:store.getState().visibilityFilter}),document.getElementById("app"))};store.subscribe(render),render();